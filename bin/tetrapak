#!/usr/bin/env escript
%% -nouser -smp auto
%% vim: ft=erlang

main(Args) ->
    %% set code path
    Script = escript:script_name(),
    ScriptDir = filename:dirname(Script),
    case file:read_link(Script) of
        {ok, Target} ->
            RelBinDir = filename:dirname(Target),
            EbinDir = filename:join([ScriptDir, RelBinDir, "..", "ebin"]);
        {error, _} ->
            EbinDir = filename:join([ScriptDir, "..", "ebin"])
    end,

    code:add_path(filename:absname(EbinDir)),

    %% run tetrapak
    tetrapak_io:start(),
    tetrapak:cli_main(Args).
